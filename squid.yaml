manifestVersion: subsquid.io/v0.1
name: efinity
version: 2104
description: |-
  An explorer-like indexer for the Efinity network.

build:

deploy:
  addons:
    postgres:
      config:
        statement_timeout: 120000
        log_min_duration_statement: 5000
  secrets:
    - SELECTED_CHAIN
    - ARCHIVE_ENDPOINT
    - EFINITY_ENDPOINT
    - CHAIN_STATE_HEIGHT
    - FETCH_ACCOUNTS
  processor:
    cmd: [ "node", "lib/processor" ]
  api:
    cmd: [
      "npx",
      "squid-graphql-server",
      "--subscriptions",
      "--dumb-cache", "in-memory",
      "--dumb-cache-ttl", "12000",
      "--dumb-cache-size", "256",
      "--dumb-cache-max-age", "12000",
      "--max-root-fields", "10",
      "--sql-statement-timeout", "5000"
    ]